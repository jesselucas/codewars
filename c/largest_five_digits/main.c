#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <limits.h>

int
largest_five_digits(const char *digits)
{
	int num = 5;

	/* Get length of string */
	int len = strlen(digits);
	if (len < num) 
		return 0;

	/* Store first 5 digit */
	int size = sizeof(char);
        
	/* Check for size_t overflow */
	if (size && num > INT_MAX / size)
		 exit(1);

	char *substring;
	if ((substring = malloc(num * size)) == NULL) 
		exit(1);

	int largest = 0;
	int subt = 0;
	for (int i = 0; i <= (len - num); i++) {
		for (int j = 0; j < num; j++) {
			substring[j] = digits[i + j];
		}
		subt = atoi(substring);
		if (subt > largest) 
			largest = subt;
	}
	
	free(substring);
	printf("largest: %d\n", largest);
	return largest;
}

int
main(void) 
{
	printf("Received %d, expected 1\n", largest_five_digits("283910") ==  83910);
	printf("Received %d, expected 1\n", largest_five_digits("1234567890") ==  67890);
	printf("Received %d, expected 1\n", largest_five_digits("9268436343840315950417211687313559513149455686174137888268901276429936891371280615323340332581343338119266386567011445601071105650661509350106018274954251384041008370326538159178695210670274306335487032878087046898057196526462902728125143970551558467149987177461286990287464530306210208946984222834154020596736579699615423967350788202471046804785946410027954234054292528208608193056058953378795435889609581322828643440099090635316276347509701577131353582745378917742414516885619956224490129910717170731310971078810360574798789696789813022221233361538909907888756860184629752080153266166164952840078431336536571119745554979375373218371927706") == 99871);
	printf("Received %d, expected 1\n", largest_five_digits("453130633036847260491708939495062575751354931789929011124095791968763898484572566478702101602091867468418866234993963376566967066902775674407817425755321929927520717594936649581159611923018762765415128904962090171385") == 99396);
	printf("Received %d, expected 1\n", largest_five_digits("4003116590974278651115020829874594037806813242129440944048148519122804496932364208424940955718940133894697846476330944040733529862142703609248192196612808350258784156426561470691452954780927896203967724861140487994364567368189697479877101252161690058904814774633612335772908267292004685175748222457946156185926356815524098110388292838448150795497961373406654476959795711902543459") == 99436);
	printf("Received %d, expected 1\n", largest_five_digits("400010595523044497148388973382422526795550054413249278087547889253033600605248782631630514214330745227207943714197282433084510786428140854327758406742250721992554561766391076036703950922233688356422251370274064359563918278223867014443483899547623216064908497218874223524478360784380990841765542986439808934124585594898966611931775667772387045514994810674787964642539978674145637238407898706280636833892236911637697688451099285880361704595780640500367469619117155225706494751903950828789611528062552421098180796790790971235033419751072910981750949937252775128295513704922019213409354524256197648111505926879412367939357986871784067559368309557240308016905274692347575305552279539330920549138364232874542861714840862139064") ==  99786);
}
